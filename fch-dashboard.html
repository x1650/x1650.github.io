<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinCrimeHub Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- Root Variables for Theming --- */
        :root {
            --bg-color: #f4f7fa;
            --card-bg-color: #ffffff;
            --text-color: #2c3e50;
            --text-light-color: #7f8c9a;
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --tertiary-color: #e74c3c;
            --warning-color: #f1c40f;
            --purple-color: #9b59b6;
            --orange-color: #e67e22;
            --border-radius: 12px;
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            --card-shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.08);
            --font-family: 'Inter', sans-serif;
        }

        /* --- General Body and Layout --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 2rem;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* --- Header --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        header h1 {
            font-size: 1.75rem;
            font-weight: 600;
        }
        
        /* --- Toggle Switch --- */
        .toggle-switch {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: var(--text-light-color);
        }
        .toggle-switch span {
            margin: 0 0.5rem;
            transition: color 0.3s ease;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        .toggle-active {
            font-weight: 600;
            color: var(--text-color);
        }
        
        /* --- Grid Layout --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
        }
        
        /* --- Card Base Style --- */
        .card {
            background-color: var(--card-bg-color);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-shadow-hover);
        }
        .card-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-light-color);
            margin-bottom: 1rem;
        }
        
        /* --- Summary Cards --- */
        .summary-card {
            grid-column: span 3;
        }
        .summary-card .big-number {
            font-size: 2.2rem;
            font-weight: 700;
            line-height: 1.2;
            color: var(--text-color);
        }
        .summary-card .split-number {
            font-size: 1.25rem;
            font-weight: 600;
        }
        .summary-card .split-label {
            font-size: 0.8rem;
            color: var(--text-light-color);
        }

        /* --- Chart & Widget Cards --- */
        .chart-card, .widget-card {
            grid-column: span 6;
        }
        .chart-container {
            height: 150px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
        }
        .bar {
            width: 22px; /* Adjusted for 5 bars */
            background-color: var(--primary-color);
            border-radius: 4px 4px 0 0;
            text-align: center;
            position: relative;
            transition: height 0.5s ease-out;
        }
        .bar-label {
            position: absolute;
            bottom: -20px;
            width: 100%;
            font-size: 0.75rem;
            color: var(--text-light-color);
            white-space: nowrap;
        }
        .bar-value {
             position: absolute;
             top: -20px;
             width: 100%;
             font-size: 0.8rem;
             font-weight: 600;
        }
        .donut-chart {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto;
            position: relative;
            transition: background 0.5s ease;
        }
        .donut-center {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .donut-center .total { font-size: 1.5rem; font-weight: 700; }
        .donut-center .label { font-size: 0.8rem; color: var(--text-light-color); }
        .legend { list-style: none; padding-top: 1rem; text-align: center; }
        .legend li { display: inline-flex; align-items: center; margin: 0 0.5rem; font-size: 0.85rem; }
        .legend-dot { width: 10px; height: 10px; border-radius: 50%; margin-right: 5px; }
        
        /* --- Trend Chart --- */
        .trend-card {
            grid-column: span 12;
        }
        .trend-chart-container {
            height: 250px;
            width: 100%;
            position: relative;
            background: 
                linear-gradient(to right, #eef1f4 1px, transparent 1px) 0 0 / calc(100% / 11) 100%,
                linear-gradient(to bottom, #eef1f4 1px, transparent 1px) 0 0 / 100% 25%;
            border-left: 2px solid #dde3e9;
            border-bottom: 2px solid #dde3e9;
        }
        .trend-line {
            fill: none;
            stroke: var(--primary-color);
            stroke-width: 3;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: d 0.5s ease-in-out;
        }

        /* --- Action Buttons --- */
        .action-button {
            background: transparent;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            font-size: 1rem;
            width: 100%;
            text-align: center;
        }
        .action-button-primary {
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }
        .action-button-primary:hover {
            background: var(--primary-color);
            color: white;
        }
        .action-button-secondary {
            color: var(--secondary-color);
            border: 2px solid var(--secondary-color);
        }
        .action-button-secondary:hover {
            background: var(--secondary-color);
            color: white;
        }

        /* --- Responsive Design --- */
        @media (max-width: 1200px) {
            .summary-card, .chart-card, .widget-card { grid-column: span 6; }
        }
        @media (max-width: 768px) {
            body { padding: 1rem; }
            header { flex-direction: column; align-items: flex-start; gap: 1rem;}
            .grid-container { grid-template-columns: 1fr; }
            .summary-card, .chart-card, .widget-card, .trend-card { grid-column: span 1 !important; } /* Important to override inline styles */
        }
    </style>
</head>
<body>

    <div class="dashboard-container">
        <header>
            <div>
                <h1>FinCrimeHub Dashboard</h1>
                <p style="margin-top: 0.5rem;">Today is <span id="current-date-time"></span></p>
            
                <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const now = new Date();
                    const options = { month: 'long', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric', hour12: true };
                    const formattedDateTime = now.toLocaleString('en-US', options);
                    document.getElementById('current-date-time').textContent = formattedDateTime;
                });
                </script>
            </div>
           
            <div class="toggle-switch" style="margin-top: 1rem;">
            <span id="toggle-label-monthly">This Month</span>
            <label class="switch">
                <input type="checkbox" id="period-toggle">
                <span class="slider"></span>
            </label>
            <span id="toggle-label-all-time">All Time</span>
            </div>
            
        </header>

        <main class="grid-container">
            <!-- Row 1: Summary Cards -->
            <div class="card summary-card">
                <div class="card-title">Suspension Profiles</div>
                <div>
                    <span class="split-number" id="suspended-merchants"></span> <span class="split-label">Merchants</span>
                </div>
                 <div>
                    <span class="split-number" id="suspended-customers"></span> <span class="split-label">Customers</span>
                </div>
            </div>
            <div class="card summary-card">
                <div class="card-title">AML Transaction Record Filed </div>
                <div>
                    <span class="split-number" id="str-filed"></span> <span class="split-label">STR Filed</span>
                </div>
                 <div>
                    <span class="split-number" id="ctr-filed"></span> <span class="split-label">CTR Filed</span>
                </div>
            </div>
            <div class="card summary-card">
                <div class="card-title">Fraud Cases Raised</div>
                <div class="big-number" id="fraud-cases"></div>
            </div>
             <div class="card summary-card">
                <div style="display: flex; flex-direction: column; justify-content: center; height: 100%; gap: 1rem;">
                    <button onclick="console.log('Add Suspension Profile clicked')" class="action-button action-button-primary">
                        + Suspension Profile
                    </button>
                    <button onclick="console.log('Add AML Record clicked')" class="action-button action-button-secondary">
                        + AML Transaction Record
                    </button>
                </div>
            </div>

            <!-- Row 2: Monetary Summary -->
            <div class="card summary-card" style="grid-column: span 6;">
                <div class="card-title">Inward Amount</div>
                <div class="big-number" id="inward-amount"></div>
            </div>
            <div class="card summary-card" style="grid-column: span 6;">
                <div class="card-title">Outward Amount</div>
                <div class="big-number" id="outward-amount"></div>
            </div>

            <!-- Row 3: Charts Section -->
            <div class="card chart-card">
                <div class="card-title">Top 5 Fraud Types</div>
                <div class="chart-container">
                    <div class="bar" id="fraud1-bar" style="background-color: var(--primary-color);">
                        <div class="bar-value" id="fraud1-val"></div><div class="bar-label">Smurfing</div>
                    </div>
                    <div class="bar" id="fraud2-bar" style="background-color: var(--tertiary-color);">
                        <div class="bar-value" id="fraud2-val"></div><div class="bar-label">Structuring</div>
                    </div>
                    <div class="bar" id="fraud3-bar" style="background-color: var(--secondary-color);">
                        <div class="bar-value" id="fraud3-val"></div><div class="bar-label">Mule Acct.</div>
                    </div>
                    <div class="bar" id="fraud4-bar" style="background-color: var(--warning-color);">
                        <div class="bar-value" id="fraud4-val"></div><div class="bar-label">Phishing</div>
                    </div>
                    <div class="bar" id="fraud5-bar" style="background-color: var(--purple-color);">
                        <div class="bar-value" id="fraud5-val"></div><div class="bar-label">ID Theft</div>
                    </div>
                </div>
            </div>
            <div class="card chart-card">
                <div class="card-title">Predicate Crimes Summary</div>
                 <div class="chart-container">
                    <div class="bar" id="crime1-bar" style="background-color: var(--primary-color);">
                        <div class="bar-value" id="crime1-val"></div><div class="bar-label">Fraud</div>
                    </div>
                    <div class="bar" id="crime2-bar" style="background-color: var(--tertiary-color);">
                        <div class="bar-value" id="crime2-val"></div><div class="bar-label">Corruption</div>
                    </div>
                    <div class="bar" id="crime3-bar" style="background-color: var(--secondary-color);">
                        <div class="bar-value" id="crime3-val"></div><div class="bar-label">Trafficking</div>
                    </div>
                     <div class="bar" id="crime4-bar" style="background-color: var(--warning-color);">
                        <div class="bar-value" id="crime4-val"></div><div class="bar-label">Cybercrime</div>
                    </div>
                    <div class="bar" id="crime5-bar" style="background-color: var(--purple-color);">
                        <div class="bar-value" id="crime5-val"></div><div class="bar-label">Smuggling</div>
                    </div>
                </div>
            </div>
            
            <!-- Row 4: Other Widgets -->
             <div class="card widget-card">
                <div class="card-title">Suspension Profile Type</div>
                 <div class="donut-chart" id="suspension-donut">
                    <div class="donut-center">
                        <div class="total" id="suspension-total"></div>
                        <div class="label">Total</div>
                    </div>
                </div>
                <ul class="legend">
                    <li><span class="legend-dot" style="background:var(--primary-color)"></span>Merchant</li>
                    <li><span class="legend-dot" style="background:var(--secondary-color)"></span>Customer</li>
                </ul>
            </div>
            <div class="card widget-card">
                <div class="card-title">KYC Level Distribution</div>
                <div class="donut-chart" id="kyc-donut">
                     <div class="donut-center">
                        <div class="total" id="kyc-total"></div>
                        <div class="label">Profiles</div>
                    </div>
                </div>
                <ul class="legend">
                    <li><span class="legend-dot" style="background:var(--primary-color)"></span>Lvl 1</li>
                    <li><span class="legend-dot" style="background:var(--secondary-color)"></span>Lvl 2</li>
                    <li><span class="legend-dot" style="background:var(--tertiary-color)"></span>Lvl 3</li>
                </ul>
            </div>
             <div class="card widget-card">
                <div class="card-title">Source of Report</div>
                <div class="donut-chart" id="source-report-donut">
                     <div class="donut-center">
                        <div class="total" id="source-report-total"></div>
                        <div class="label">Reports</div>
                    </div>
                </div>
                 <ul class="legend">
                    <li><span class="legend-dot" style="background:var(--primary-color)"></span>Internal</li>
                    <li><span class="legend-dot" style="background:var(--tertiary-color)"></span>External</li>
                     <li><span class="legend-dot" style="background:var(--warning-color)"></span>System</li>
                </ul>
            </div>
             <div class="card widget-card">
                <div class="card-title">Scenario Type</div>
                <div class="donut-chart" id="scenario-type-donut">
                     <div class="donut-center">
                        <div class="total" id="scenario-type-total"></div>
                        <div class="label">Scenarios</div>
                    </div>
                </div>
                 <ul class="legend">
                    <li><span class="legend-dot" style="background:var(--primary-color)"></span>Velocity</li>
                    <li><span class="legend-dot" style="background:var(--secondary-color)"></span>High Value</li>
                     <li><span class="legend-dot" style="background:var(--purple-color)"></span>Unusual</li>
                </ul>
            </div>

            <!-- Row 5: Trend Charts -->
            <div class="card trend-card">
                <div class="card-title">AML Transaction Record Filed per Month (12-month trend)</div>
                 <div class="trend-chart-container">
                    <svg width="100%" height="100%" viewBox="0 0 500 100" preserveAspectRatio="none">
                      <path id="trend-line-aml" class="trend-line" d="" />
                    </svg>
                 </div>
            </div>
            <div class="card trend-card">
                <div class="card-title">Suspension Profiles per Month (12-month trend)</div>
                 <div class="trend-chart-container">
                    <svg width="100%" height="100%" viewBox="0 0 500 100" preserveAspectRatio="none">
                      <path id="trend-line-suspensions" class="trend-line" style="stroke: var(--secondary-color);" d="" />
                    </svg>
                 </div>
            </div>
            <div class="card trend-card">
                <div class="card-title">Fraud Cases Raised per Month (12-month trend)</div>
                 <div class="trend-chart-container">
                    <svg width="100%" height="100%" viewBox="0 0 500 100" preserveAspectRatio="none">
                      <path id="trend-line-fraud" class="trend-line" style="stroke: var(--tertiary-color);" d="" />
                    </svg>
                 </div>
            </div>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // --- Data Store ---
    const data = {
        monthly: {
            strFiled: 105,
            ctrFiled: 4047,
            fraudCases: 98,
            suspendedMerchants: 12,
            suspendedCustomers: 31,
            inwardAmount: 5250000.75,
            outwardAmount: 3100000.50,
            fraudTypes: { values: [45, 21, 15, 12, 8], max: 50 },
            predicateCrimes: { values: [52, 28, 18, 11, 9], max: 60 },
            suspension: { merchants: 12, customers: 31 },
            kyc: { l1: 1200, l2: 3500, l3: 850 },
            sourceReport: { values: [89, 42, 15] },
            scenarioType: { values: [55, 30, 13] },
            trendPointsAml: [85, 70, 75, 60, 65, 50, 55, 40, 30, 45, 50, 42],
            trendPointsSuspensions: [10, 12, 8, 15, 11, 9, 14, 16, 10, 13, 11, 14],
            trendPointsFraud: [25, 22, 30, 28, 35, 32, 29, 38, 40, 33, 36, 31]
        },
        allTime: {
            strFiled: 2843,
            ctrFiled: 110000,
            fraudCases: 2109,
            suspendedMerchants: 489,
            suspendedCustomers: 1156,
            inwardAmount: 150750000.00,
            outwardAmount: 98500000.00,
            fraudTypes: { values: [998, 603, 312, 250, 180], max: 1000 },
            predicateCrimes: { values: [1540, 1105, 490, 750, 600], max: 1600 },
            suspension: { merchants: 489, customers: 1156 },
            kyc: { l1: 25000, l2: 78000, l3: 9843 },
            sourceReport: { values: [1200, 540, 369] },
            scenarioType: { values: [980, 734, 395] },
            trendPointsAml: [100, 80, 85, 60, 65, 40, 50, 30, 20, 45, 55, 40],
            trendPointsSuspensions: [40, 42, 38, 45, 41, 39, 44, 46, 40, 43, 41, 44],
            trendPointsFraud: [150, 122, 130, 128, 135, 132, 129, 138, 140, 133, 136, 131]
        }
    };

    // --- DOM Element Cache ---
    const elements = {
        toggle: document.getElementById('period-toggle'),
        toggleLabelMonthly: document.getElementById('toggle-label-monthly'),
        toggleLabelAllTime: document.getElementById('toggle-label-all-time'),
        strFiled: document.getElementById('str-filed'),
        ctrFiled: document.getElementById('ctr-filed'),
        fraudCases: document.getElementById('fraud-cases'),
        suspendedMerchants: document.getElementById('suspended-merchants'),
        suspendedCustomers: document.getElementById('suspended-customers'),
        inwardAmount: document.getElementById('inward-amount'),
        outwardAmount: document.getElementById('outward-amount'),
        
        fraudVals: Array.from({length: 5}, (_, i) => document.getElementById(`fraud${i+1}-val`)),
        fraudBars: Array.from({length: 5}, (_, i) => document.getElementById(`fraud${i+1}-bar`)),
        crimeVals: Array.from({length: 5}, (_, i) => document.getElementById(`crime${i+1}-val`)),
        crimeBars: Array.from({length: 5}, (_, i) => document.getElementById(`crime${i+1}-bar`)),

        suspensionTotal: document.getElementById('suspension-total'),
        suspensionDonut: document.getElementById('suspension-donut'),
        kycTotal: document.getElementById('kyc-total'),
        kycDonut: document.getElementById('kyc-donut'),
        sourceReportTotal: document.getElementById('source-report-total'),
        sourceReportDonut: document.getElementById('source-report-donut'),
        scenarioTypeTotal: document.getElementById('scenario-type-total'),
        scenarioTypeDonut: document.getElementById('scenario-type-donut'),

        trendLineAml: document.getElementById('trend-line-aml'),
        trendLineSuspensions: document.getElementById('trend-line-suspensions'),
        trendLineFraud: document.getElementById('trend-line-fraud'),
    };

    // --- Helper Formatters ---
    const formatNumber = (num) => num.toLocaleString('en-US');
    const formatCurrency = (num) => 'â‚±' + num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

    // --- Function to create SVG path for trend line ---
    const createSvgPath = (points) => {
        const width = 500;
        const height = 100;
        const maxPoint = Math.max(...points) * 1.1; // Add some padding
        if (maxPoint === 0) return `M 0,${height}`; // Handle case with no data
        const step = width / (points.length - 1);
        let path = `M 0,${height - (points[0]/maxPoint * height)}`;
        points.forEach((point, i) => {
            if (i > 0) {
                const x = i * step;
                const y = height - (point/maxPoint * height);
                const prevX = (i - 1) * step;
                const prevY = height - (points[i-1]/maxPoint * height);
                const cp1x = prevX + step / 2;
                const cp1y = prevY;
                const cp2x = x - step / 2;
                const cp2y = y;
                path += ` C ${cp1x},${cp1y} ${cp2x},${cp2y} ${x},${y}`;
            }
        });
        return path;
    };

    // --- Main Update Function ---
    function updateDashboard(period) {
        const d = data[period];
        
        // Update summary cards
        elements.strFiled.textContent = formatNumber(d.strFiled);
        elements.ctrFiled.textContent = formatNumber(d.ctrFiled);
        elements.fraudCases.textContent = formatNumber(d.fraudCases);
        elements.suspendedMerchants.textContent = formatNumber(d.suspendedMerchants);
        elements.suspendedCustomers.textContent = formatNumber(d.suspendedCustomers);
        elements.inwardAmount.textContent = formatCurrency(d.inwardAmount);
        elements.outwardAmount.textContent = formatCurrency(d.outwardAmount);
        
        // Update bar charts
        const updateBarChart = (values, max, barElements, valElements) => {
            values.forEach((value, index) => {
                if (barElements[index] && valElements[index]) {
                    valElements[index].textContent = formatNumber(value);
                    barElements[index].style.height = `${(value / max) * 100}%`;
                }
            });
        };
        updateBarChart(d.fraudTypes.values, d.fraudTypes.max, elements.fraudBars, elements.fraudVals);
        updateBarChart(d.predicateCrimes.values, d.predicateCrimes.max, elements.crimeBars, elements.crimeVals);

        // Update donut charts
        const updateDonutChart = (values, totalEl, donutEl, colors) => {
            const total = values.reduce((a, b) => a + b, 0);
            totalEl.textContent = formatNumber(total);
            if (total === 0) {
                donutEl.style.background = '#eee';
                return;
            }
            let cumulativePercent = 0;
            const gradientParts = values.map((val, i) => {
                const percent = (val / total) * 100;
                const start = cumulativePercent;
                cumulativePercent += percent;
                return `${colors[i]} ${start}% ${cumulativePercent}%`;
            });
            donutEl.style.background = `conic-gradient(${gradientParts.join(', ')})`;
        };
        updateDonutChart([d.suspension.merchants, d.suspension.customers], elements.suspensionTotal, elements.suspensionDonut, ['var(--primary-color)', 'var(--secondary-color)']);
        updateDonutChart([d.kyc.l1, d.kyc.l2, d.kyc.l3], elements.kycTotal, elements.kycDonut, ['var(--primary-color)', 'var(--secondary-color)', 'var(--tertiary-color)']);
        updateDonutChart(d.sourceReport.values, elements.sourceReportTotal, elements.sourceReportDonut, ['var(--primary-color)', 'var(--tertiary-color)', 'var(--warning-color)']);
        updateDonutChart(d.scenarioType.values, elements.scenarioTypeTotal, elements.scenarioTypeDonut, ['var(--primary-color)', 'var(--secondary-color)', 'var(--purple-color)']);

        // Update trend line charts
        elements.trendLineAml.setAttribute('d', createSvgPath(d.trendPointsAml));
        elements.trendLineSuspensions.setAttribute('d', createSvgPath(d.trendPointsSuspensions));
        elements.trendLineFraud.setAttribute('d', createSvgPath(d.trendPointsFraud));

        // Update toggle label styles
        elements.toggleLabelMonthly.classList.toggle('toggle-active', period === 'monthly');
        elements.toggleLabelAllTime.classList.toggle('toggle-active', period === 'allTime');
    }

    // --- Event Listener ---
    elements.toggle.addEventListener('change', (event) => {
        updateDashboard(event.currentTarget.checked ? 'allTime' : 'monthly');
    });

    // --- Initial Load ---
    updateDashboard('monthly');
});
</script>

</body>
</html>
